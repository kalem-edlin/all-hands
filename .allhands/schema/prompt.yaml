# Prompt File Schema
# Single source of truth for prompt file structure

frontmatter:
  number:
    type: integer
    required: true
    description: "Prompt execution order (01, 02, etc.)"

  title:
    type: string
    required: true
    description: "Human-readable task name"

  status:
    type: enum
    values: [pending, in_progress, done]
    default: pending
    description: "Current execution state"

  dependencies:
    type: array
    items: integer
    default: []
    description: "Prompt numbers that must complete first"

  attempts:
    type: integer
    default: 0
    description: "Number of execution attempts"

  commits:
    type: array
    items: string
    default: []
    description: "Git commit hashes for work done on this prompt (chronological order, includes failed attempts)"

body:
  description: "Markdown task instructions for the executing agent"
  sections:
    - name: "Tasks"
      required: true
      description: "List of 2-6 specific tasks to complete with implementation approach ideas and suggested instructions"

    - name: "Acceptance Criteria"
      required: true
      description: "Validation requirements for completion"

    - append_success_format: |
        **Summary**: Brief explanation
        **Limitations**: List of key limitations discovered that hindered implementation
        **Decisions**: List of key decisions made that were open to make, or required to make in order to achieve the acceptance criteria
        **Files**: List of key files affected

    - append_failure_format: |
        **Verdict**: Why the previous attempt was cleared for a blank slate, OR why the previous attempt was commited and expected to be built on top of
        **Learnings**: What was learned in the attempt that failed
        **Left to do**: Infered tips on how to keep going after failure
